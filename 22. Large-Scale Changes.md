# 22. 대규모 변경

- 구글은 코드베이스 전반을 전면적으로 건드리는 변경을 원자적으로 수행한다는 어이디어를 포기했다.
- 경험에 따르면 코드베이스와 엔지니어 수가 늘어날수록 원자적으로 수행할 수 있는 변경의 크기는 줄어든다.

## 2.2.1 대규모 변경(Large-Scale Changes, LSC)이란?

- 논리적으로 연관되어 있으나 현실적인 한계 때문에 원자적으로 서브밋할 수 없는 변경들의 집합
- LSC로 인해 생성되는 변경
  - 코드베이스 전반을 훑는 분석 도구로 찾은 공통 안티패턴 청소
  - 폐기 대상 API 호출 대체
  - (컴파일러 업그레이드 등) 저수준 인프라 개선사항 활성화
  - 사용자들을 옛 시스템에서 새로운 시스템으로 마이그레이션

## 22.2 누가 대규모 변경을 처리하나?

- 구글에서는 상당 비중을 인프라팀들이 수행한다. 하지만 LSC 도구들과 지원 자원들은 누구나 이용할 수 있다.
- 새로운 클래스, 함수, 시스템을 만든 후 사용자 모두에게 새 버전을 쓰도록 강제하지 않는 이유?
  1. 하부 시스템을 구축하고 관리하는 인프라팀들은 그 시스템을 활용하는 수만 개의 참조를 수정하는 데 필요한 도메인 지식도 갖추고 있다. 인프라를 이용하는 팀들은 이런 마이그레이션을 처리하는 방법을 모를 가능 성이 크다.
  2. 합당한 보상 없이 할 일만 늘어나는 상황을 좋아할 사람은 없다. 새 시스템이 기존 시스템보다 낫더라도 팀에 따라서는 자발적으로 업그레이드할 만한 매력을 느끼지 못할 수도 있다. 반드시 마이그레이션해야 할 만큼 새로운 시스템이 중요하다면 비용을 조직 차원에서 부담하는 게 맞다.
  3. 대규모로 변경해야 할 시스템을 소유한 팀이 주도해야 변경을 완료하는 데 유리하다.
