# 16. 버전 관리와 브랜치 관리

## 16.1 버전 관리란?

- 파일의 시간에 따른 변경 기록(버전)을 추적하는 시스템
- 파일들의 메타 데이터를 관리하며, 이와 버전별 복사본을 합쳐 리포지터리라고 한다.
- 여러 개발자가 같은 파일들로 동시에 작업할 수 있어서 팀 업무를 효과적으로 조율할 수 있다.
- 합의된 단일 진실 공급원(Single Source of Truth, SSOT)이 없는 환경에서 협업하려면 너무 불편하고 오류가 많이 생겨 도입

### 16.1.1 버전 관리가 중요한 이유

- VCS(파일 이름, 작성 시각, 브랜치 이름) => 파일 내용
- 따로 명시하지 않으면 브랜치는 기본적으로 메인 브랜치를 가리키며, 메인 브랜치를 보통 'head', 'default', 'trunk' 등으로 부른다.

### 16.1.2 중앙집중형 VCS vs 분산형 VCS

#### 중앙집중형 VCS(Centralized VCS)

- 단 하나의 중앙 리포지터리를 이용하는 모델(조직 내 공유 컴퓨트 자원을 이용할 가능성이 큼)
- 개발자들은 각 파일을 체크아웃하여 로컬 컴퓨터에서 이용할 수 있지만, 파일들의 버전 관리 상태와 관련된 작업들(파일 추가, 도익화, 기존 파일 갱신 등)은 반드시 중앙 서버에 전달해야 한다.

#### 분산형 VCS(Distributed VCS)

- 전통적인 중앙집중형 VCS와 개념적으로 가장 큰 차이는 '어디에 커밋하는가?' 혹은 '이 파일들의 어느 복사본이 리포지터리로 간주되는가?'
- 분산형 VCS에서의 작업 흐름
  1. 기존 리포지터리를 로컬에 복제한다.
  2. 파일을 변경한다.
  3. 로컬 리포지터리에 커밋한다.
  4. 2~3을 원하는 만큼 반복한다.
  5. 로컬에 적용된 커밋 중 일부 혹은 전체를 다른 리포지터리로 커밋한다. 이때 다른 리포지터리는 1에서 복제해온 리포지터리일 수도, 아닐 수도 있다.
- 특정한 하나를 진실 공급원이라고 지정하지 않아도 되므로 오프라인 작업과 협업에 더 유리하다.

### 16.1.3 진실 공급원

- 커밋 태그와 PR을 전혀 다른 개발 브랜치로 전달할 수 있기에 회귀할 위험이 존재한다. 따라서 분산형 VCS를 운영하려면 정책과 규범을 더 명확하게 정해 지켜야 한다.

### 16.1.4 버전 관리 vs 의존성 관리

- 버전 관리 정책은 개념적으로 의존성 관리와 매우 비슷하다.
- 의존성 관리는 다른 조직에서 통제하는 프로젝트들을 관리해야 하기에 훨씬 어렵다.
